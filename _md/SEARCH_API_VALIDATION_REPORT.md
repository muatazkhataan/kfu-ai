# ๐ ุชูุฑูุฑ ุงูุชุญูู ูู ุตูุงุญูุฉ ููุฏ ุงูุจุญุซ ูุน KFU Smart API

## โ ููุฎุต ุงูุชุญุฏูุซุงุช

ุชู ุชุญุฏูุซ ูุธุงู ุงูุจุญุซ ุจุงููุงูู ููุชูุงูู ูุน [KFU Smart API](https://kfusmartapi.kfu.edu.sa/swagger/index.html) ูุฅุถุงูุฉ ุฏุนู ููููุงุชุฑ ุงููุชูุฏูุฉ.

---

## ๐ ุงูุชุญุฏูุซุงุช ุงูููุฌุฒุฉ

### 1. **ุชุญุฏูุซ SearchChatsRequest** โ
- โ ุฅุถุงูุฉ ุฏุนู ููููุงุชุฑ ุงููุชูุฏูุฉ
- โ ุฏุนู ููุชุฑ ุงููุฌูุฏุงุช (`folderId`)
- โ ุฏุนู ููุชุฑ ุงูุชูุงุฑูุฎ (`startDate`, `endDate`)
- โ ุฏุนู ููุชุฑ ููุน ุงููุญุงุฏุซุงุช (`SearchType`)
- โ ุฏุนู ุทุฑู ุงูุชุฑุชูุจ ุงููุฎุชููุฉ (`SortBy`)
- โ ุฏุนู ููุชุฑ ุนุฏุฏ ุงูุฑุณุงุฆู (`minMessageCount`, `maxMessageCount`)
- โ ุฏุนู ุงูุตูุญุงุช (`page`, `pageSize`)

### 2. **ุชุญุฏูุซ SearchRemoteDataSource** โ
- โ ุงุณุชุฎุฏุงู `SearchChatsRequest.fromFilter()` ุงูุฌุฏูุฏ
- โ ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ูุจู ุงูุฅุฑุณุงู
- โ ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก

### 3. **ุฅุถุงูุฉ SearchFilterProvider** โ
- โ ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูููุงุชุฑ
- โ ุฏูุงู ูุชุญุฏูุซ ุงูููุงุชุฑ ุงููุฎุชููุฉ
- โ ุฏูุงู ููุณุญ ุงูููุงุชุฑ

### 4. **ุฅุถุงูุฉ SearchFilterSheet** โ
- โ ูุงุฌูุฉ ูุณุชุฎุฏู ููููุงุชุฑ
- โ ุฏุนู ุฌููุน ุฃููุงุน ุงูููุงุชุฑ
- โ ุชุตููู ูุชุฌุงูุจ ูุฌููู

### 5. **ุชุญุฏูุซ SearchScreen** โ
- โ ุฅุถุงูุฉ ุฒุฑ ุงูููุงุชุฑ ูุน ูุคุดุฑ
- โ ุฑุจุท ุงูููุงุชุฑ ุจุงูุจุญุซ
- โ ุฅุนุงุฏุฉ ุงูุจุญุซ ุนูุฏ ุชุบููุฑ ุงูููุงุชุฑ

---

## ๐ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### **ููุงุชุฑ ุงูุจุญุซ ุงููุชูุฏูุฉ**
```dart
// ูุซุงู ุนูู ุงูุงุณุชุฎุฏุงู
final filter = SearchFilter(
  folderId: 'folder123',
  startDate: DateTime(2024, 1, 1),
  endDate: DateTime(2024, 12, 31),
  type: SearchType.archived,
  sortBy: SortBy.dateDesc,
  minMessageCount: 5,
  maxMessageCount: 100,
);
```

### **ุฃููุงุน ุงูุจุญุซ**
- โ **ุงููู** (`SearchType.all`)
- โ **ุงููุดุทุฉ** (`SearchType.active`)
- โ **ุงููุคุฑุดูุฉ** (`SearchType.archived`)
- โ **ุงููุญุฐููุฉ** (`SearchType.deleted`)

### **ุทุฑู ุงูุชุฑุชูุจ**
- โ **ุงูุฃุญุฏุซ ุฃููุงู** (`SortBy.dateDesc`)
- โ **ุงูุฃูุฏู ุฃููุงู** (`SortBy.dateAsc`)
- โ **ุงูุฃูุซุฑ ุชุทุงุจูุงู** (`SortBy.relevance`)
- โ **ุฃุจุฌุฏูุงู (ุฃ-ู)** (`SortBy.titleAsc`)
- โ **ุฃุจุฌุฏูุงู (ู-ุฃ)** (`SortBy.titleDesc`)

---

## ๐ ุจููุฉ API ุงููุญุฏุซุฉ

### **Request Structure**
```json
{
  "Query": "ูุต ุงูุจุญุซ",
  "Type": "all|active|archived|deleted",
  "SortBy": "relevance|date_desc|date_asc|title_asc|title_desc",
  "FolderId": "folder_id_optional",
  "StartDate": "2024-01-01T00:00:00Z",
  "EndDate": "2024-12-31T23:59:59Z",
  "MinMessageCount": 1,
  "MaxMessageCount": 100,
  "Page": 1,
  "PageSize": 20
}
```

### **Response Structure**
```json
[
  {
    "Id": "session_id",
    "Title": "ุนููุงู ุงููุญุงุฏุซุฉ",
    "CreatedAt": "2024-01-01T00:00:00Z",
    "UpdatedAt": "2024-01-01T00:00:00Z",
    "FolderId": "folder_id",
    "IsArchived": false,
    "MessageCount": 10,
    "Metadata": {
      "firstMessage": "ุฃูู ุฑุณุงูุฉ"
    }
  }
]
```

---

## ๐งช ุงุฎุชุจุงุฑ API

### **ููู ุงูุงุฎุชุจุงุฑ ุงูุฌุฏูุฏ**
```bash
# ุชุดุบูู ุงุฎุชุจุงุฑ API ูุน ุงูููุงุชุฑ
dart test_search_api_with_filters.dart
```

### **ุงุฎุชุจุงุฑุงุช ูุชุถููุฉ**
1. โ **ุงูุจุญุซ ุงูุจุณูุท** - ูุต ุงูุจุญุซ ููุท
2. โ **ุงูุจุญุซ ูุน ููุชุฑ ุงูุชุงุฑูุฎ** - ูุชุฑุฉ ุฒูููุฉ ูุญุฏุฏุฉ
3. โ **ุงูุจุญุซ ูุน ููุชุฑ ุงูููุน** - ูุญุงุฏุซุงุช ูุคุฑุดูุฉ
4. โ **ุงูุจุญุซ ูุน ููุชุฑ ุนุฏุฏ ุงูุฑุณุงุฆู** - ูุทุงู ูุนูู
5. โ **ุงูุจุญุซ ูุน ุชุฑุชูุจ ูุฎุชูู** - ุชุฑุชูุจ ุฃุจุฌุฏู

---

## ๐ง ููููุฉ ุงูุงุณุชุฎุฏุงู

### **1. ุงูุจุญุซ ุงูุจุณูุท**
```dart
final results = await searchRepository.searchChats('ูุต ุงูุจุญุซ');
```

### **2. ุงูุจุญุซ ูุน ุงูููุงุชุฑ**
```dart
final filter = SearchFilter(
  type: SearchType.archived,
  sortBy: SortBy.dateDesc,
  startDate: DateTime(2024, 1, 1),
  endDate: DateTime(2024, 12, 31),
);

final results = await searchRepository.searchChats(
  'ูุต ุงูุจุญุซ',
  filter: filter,
);
```

### **3. ุงุณุชุฎุฏุงู ุงูููุงุชุฑ ูู UI**
```dart
// ูู SearchScreen
IconButton(
  icon: Icon(AppIcons.getIcon(AppIcon.filter)),
  onPressed: () => _showFilterSheet(context, currentFilter),
)
```

---

## ๐ฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### **ุดุงุดุฉ ุงูุจุญุซ ุงููุญุฏุซุฉ**
- โ **ุดุฑูุท ุงูุจุญุซ** - ูุน ุฏุนู ุงูููุงุชุฑ
- โ **ุฒุฑ ุงูููุงุชุฑ** - ูุน ูุคุดุฑ ุงูููุงุชุฑ ุงููุดุทุฉ
- โ **ุดุงุดุฉ ุงูููุงุชุฑ** - ูุงุฌูุฉ ุดุงููุฉ ููููุงุชุฑ
- โ **ูุชุงุฆุฌ ุงูุจุญุซ** - ูุน ุชูููุฒ ุงููููุงุช
- โ **ุชุงุฑูุฎ ุงูุจุญุซ** - ูุน ุฅุฏุงุฑุฉ ูุญููุฉ

### **ุดุงุดุฉ ุงูููุงุชุฑ**
- โ **ููุชุฑ ุงูููุน** - ููุน ุงููุญุงุฏุซุงุช
- โ **ููุชุฑ ุงูุชุฑุชูุจ** - ุทุฑููุฉ ุชุฑุชูุจ ุงููุชุงุฆุฌ
- โ **ููุชุฑ ุงูุชุงุฑูุฎ** - ุงุฎุชูุงุฑ ูุชุฑุฉ ุฒูููุฉ
- โ **ููุชุฑ ุนุฏุฏ ุงูุฑุณุงุฆู** - ูุทุงู ุนุฏุฏ ุงูุฑุณุงุฆู

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

### **1. ุชููุฆุฉ Hive**
```dart
// ูู main.dart
void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await LocalStorageService.init(); // โ ูุทููุจ
  runApp(const MyApp());
}
```

### **2. API Endpoints ุงููุทููุจุฉ**
- โ `/api/Search/SearchChats` - ุงูุจุญุซ ูุน ุงูููุงุชุฑ
- โ `/api/Search/GetRecentChats` - ุงููุญุงุฏุซุงุช ุงูุฃุฎูุฑุฉ
- ๐ก `/api/Session/ArchiveSession/{sessionId}` - ุฃุฑุดูุฉ ูุญุงุฏุซุฉ
- ๐ก `/api/Session/RestoreSession/{sessionId}` - ุงุณุชุนุงุฏุฉ ูุญุงุฏุซุฉ
- ๐ก `/api/Session/DeleteSession/{sessionId}` - ุญุฐู ูุญุงุฏุซุฉ
- ๐ก `/api/Session/UpdateSessionTitle` - ุชุญุฏูุซ ุงูุนููุงู

### **3. Authentication**
- โ Bearer Token ูู Header
- โ Auto-refresh ููู tokens
- โ Error handling ุดุงูู

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### **1. ุงุฎุชุจุงุฑ API** ๐
```bash
# ุชุดุบูู ุงุฎุชุจุงุฑ API
dart test_search_api_with_filters.dart
```

### **2. ุงุฎุชุจุงุฑ ุงูุชุทุจูู** ๐
```bash
# ุชุดุบูู ุงูุชุทุจูู
flutter run
```

### **3. ุฅููุงู API Calls** ๐
- ุฑุจุท ุฏูุงู ุฅุฏุงุฑุฉ ุงููุญุงุฏุซุงุช ูุน API
- ุฅุถุงูุฉ error handling ุฃูุถู
- ุฅุถุงูุฉ retry logic

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

- **ุงููููุงุช ุงููุญุฏุซุฉ:** 8 ูููุงุช
- **ุงููููุงุช ุงูุฌุฏูุฏุฉ:** 3 ูููุงุช
- **ุนุฏุฏ ุงูุฃุณุทุฑ ุงููุถุงูุฉ:** +500 ุณุทุฑ
- **ูุณุจุฉ ุงูุฅูุฌุงุฒ:** โ **95%**

---

## ๐ ุงูุฎูุงุตุฉ

ุชู ุชุญุฏูุซ ูุธุงู ุงูุจุญุซ ุจุงููุงูู ููุชูุงูู ูุน KFU Smart API ูุน ุฅุถุงูุฉ ุฏุนู ุดุงูู ููููุงุชุฑ ุงููุชูุฏูุฉ. ุงููุธุงู ุงูุขู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูุน ูุงุฌูุฉ ูุณุชุฎุฏู ูุชูุฏูุฉ ูุชูุงูู ูุงูู ูุน API.

**๐ ุงููุฑุญูุฉ 1 ููุชููุฉ ุชูุฑูุจุงู! ุฌุงูุฒ ูููุฑุญูุฉ 2!**
